/* tslint:disable */
/* eslint-disable */
/**
 * OIS Gateway API
 * API Gateway для оператора информационной системы ЦФА
 *
 * The version of the OpenAPI document: 1.0.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  InvestorStatusResponse,
  KycCheckRequest,
  KycDecisionRequest,
  KycDecisionResponse,
  KycDocumentsResponse,
  KycResult,
  ProblemDetails,
  QualificationEvaluateRequest,
  QualificationResult,
} from '../models/index';
import {
    InvestorStatusResponseFromJSON,
    InvestorStatusResponseToJSON,
    KycCheckRequestFromJSON,
    KycCheckRequestToJSON,
    KycDecisionRequestFromJSON,
    KycDecisionRequestToJSON,
    KycDecisionResponseFromJSON,
    KycDecisionResponseToJSON,
    KycDocumentsResponseFromJSON,
    KycDocumentsResponseToJSON,
    KycResultFromJSON,
    KycResultToJSON,
    ProblemDetailsFromJSON,
    ProblemDetailsToJSON,
    QualificationEvaluateRequestFromJSON,
    QualificationEvaluateRequestToJSON,
    QualificationResultFromJSON,
    QualificationResultToJSON,
} from '../models/index';

export interface CheckKycRequest {
    kycCheckRequest: KycCheckRequest;
}

export interface EvaluateQualificationRequest {
    qualificationEvaluateRequest: QualificationEvaluateRequest;
}

export interface GetInvestorStatusRequest {
    id: string;
}

export interface MakeKycDecisionRequest {
    investorId: string;
    kycDecisionRequest: KycDecisionRequest;
}

export interface UploadKycDocumentsRequest {
    investorId: string;
    files: Array<Blob>;
    documentType?: UploadKycDocumentsDocumentTypeEnum;
    comment?: string;
}

/**
 * 
 */
export class ComplianceApi extends runtime.BaseAPI {

    /**
     * Check KYC status
     */
    async checkKycRaw(requestParameters: CheckKycRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<KycResult>> {
        if (requestParameters['kycCheckRequest'] == null) {
            throw new runtime.RequiredError(
                'kycCheckRequest',
                'Required parameter "kycCheckRequest" was null or undefined when calling checkKyc().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/compliance/kyc/check`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: KycCheckRequestToJSON(requestParameters['kycCheckRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => KycResultFromJSON(jsonValue));
    }

    /**
     * Check KYC status
     */
    async checkKyc(requestParameters: CheckKycRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<KycResult> {
        const response = await this.checkKycRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Evaluate qualification
     */
    async evaluateQualificationRaw(requestParameters: EvaluateQualificationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<QualificationResult>> {
        if (requestParameters['qualificationEvaluateRequest'] == null) {
            throw new runtime.RequiredError(
                'qualificationEvaluateRequest',
                'Required parameter "qualificationEvaluateRequest" was null or undefined when calling evaluateQualification().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/compliance/qualification/evaluate`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: QualificationEvaluateRequestToJSON(requestParameters['qualificationEvaluateRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => QualificationResultFromJSON(jsonValue));
    }

    /**
     * Evaluate qualification
     */
    async evaluateQualification(requestParameters: EvaluateQualificationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<QualificationResult> {
        const response = await this.evaluateQualificationRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Get investor compliance status
     */
    async getInvestorStatusRaw(requestParameters: GetInvestorStatusRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<InvestorStatusResponse>> {
        if (requestParameters['id'] == null) {
            throw new runtime.RequiredError(
                'id',
                'Required parameter "id" was null or undefined when calling getInvestorStatus().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/compliance/investors/{id}/status`;
        urlPath = urlPath.replace(`{${"id"}}`, encodeURIComponent(String(requestParameters['id'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => InvestorStatusResponseFromJSON(jsonValue));
    }

    /**
     * Get investor compliance status
     */
    async getInvestorStatus(requestParameters: GetInvestorStatusRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<InvestorStatusResponse> {
        const response = await this.getInvestorStatusRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Make KYC decision
     */
    async makeKycDecisionRaw(requestParameters: MakeKycDecisionRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<KycDecisionResponse>> {
        if (requestParameters['investorId'] == null) {
            throw new runtime.RequiredError(
                'investorId',
                'Required parameter "investorId" was null or undefined when calling makeKycDecision().'
            );
        }

        if (requestParameters['kycDecisionRequest'] == null) {
            throw new runtime.RequiredError(
                'kycDecisionRequest',
                'Required parameter "kycDecisionRequest" was null or undefined when calling makeKycDecision().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/kyc/{investorId}/decision`;
        urlPath = urlPath.replace(`{${"investorId"}}`, encodeURIComponent(String(requestParameters['investorId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: KycDecisionRequestToJSON(requestParameters['kycDecisionRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => KycDecisionResponseFromJSON(jsonValue));
    }

    /**
     * Make KYC decision
     */
    async makeKycDecision(requestParameters: MakeKycDecisionRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<KycDecisionResponse> {
        const response = await this.makeKycDecisionRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Upload KYC documents
     */
    async uploadKycDocumentsRaw(requestParameters: UploadKycDocumentsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<KycDocumentsResponse>> {
        if (requestParameters['investorId'] == null) {
            throw new runtime.RequiredError(
                'investorId',
                'Required parameter "investorId" was null or undefined when calling uploadKycDocuments().'
            );
        }

        if (requestParameters['files'] == null) {
            throw new runtime.RequiredError(
                'files',
                'Required parameter "files" was null or undefined when calling uploadKycDocuments().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const consumes: runtime.Consume[] = [
            { contentType: 'multipart/form-data' },
        ];
        // @ts-ignore: canConsumeForm may be unused
        const canConsumeForm = runtime.canConsumeForm(consumes);

        let formParams: { append(param: string, value: any): any };
        let useForm = false;
        // use FormData to transmit files using content-type "multipart/form-data"
        useForm = canConsumeForm;
        if (useForm) {
            formParams = new FormData();
        } else {
            formParams = new URLSearchParams();
        }

        if (requestParameters['files'] != null) {
            requestParameters['files'].forEach((element) => {
                formParams.append('files', element as any);
            })
        }

        if (requestParameters['documentType'] != null) {
            formParams.append('documentType', requestParameters['documentType'] as any);
        }

        if (requestParameters['comment'] != null) {
            formParams.append('comment', requestParameters['comment'] as any);
        }


        let urlPath = `/v1/kyc/{investorId}/documents`;
        urlPath = urlPath.replace(`{${"investorId"}}`, encodeURIComponent(String(requestParameters['investorId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: formParams,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => KycDocumentsResponseFromJSON(jsonValue));
    }

    /**
     * Upload KYC documents
     */
    async uploadKycDocuments(requestParameters: UploadKycDocumentsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<KycDocumentsResponse> {
        const response = await this.uploadKycDocumentsRaw(requestParameters, initOverrides);
        return await response.value();
    }

}

/**
 * @export
 */
export const UploadKycDocumentsDocumentTypeEnum = {
    Passport: 'passport',
    Inn: 'inn',
    Snils: 'snils',
    AddressProof: 'address_proof',
    IncomeProof: 'income_proof',
    Other: 'other'
} as const;
export type UploadKycDocumentsDocumentTypeEnum = typeof UploadKycDocumentsDocumentTypeEnum[keyof typeof UploadKycDocumentsDocumentTypeEnum];
